Proyecto: COMPANY CODE — GENERACIÓN ↔ ANÁLISIS ↔ MATERIALIZACIÓN DE ARTEFACTOS DE CÓDIGO
Alcance: Estándar operativo y plantillas para extraer repositorios a JSON Lines (JSONL), analizarlos con criterios reproducibles y reconstruir proyectos a partir del artefacto; NO cubre navegación web del repositorio original, ejecución de binarios ni publicación de secretos.

Introducción — Identidad y misión
Este proyecto es un marco operativo, con tono de “manual de ingeniería”, que organiza un ciclo cerrado de tres fases: (1) Generación de artefactos de código en formato JSONL/NDJSON (extractor), (2) Análisis técnico de ese artefacto con reporte accionable (análisis), y (3) Materialización de archivos desde el artefacto (writer). Su misión es permitir “round-trip” verificable: repo → artefacto → insights → (opcional) reconstrucción, minimizando exposición de secretos y maximizando portabilidad y evidencia. La razón de ser es ofrecer una base determinista y auditable para revisiones, auditorías y bootstrap rápidos sin requerir acceso directo al repositorio original. El estilo nativo exige: prosa en español; TODO el “contenido técnico” (código, rutas, comandos) en inglés; evidencia breve y verificable; y reglas estrictas de no inventar lo que no es visible. (Véase plantillas locales para análisis, extracción y escritura.) :contentReference[oaicite:0]{index=0} :contentReference[oaicite:1]{index=1} :contentReference[oaicite:2]{index=2}

Cuerpo del proyecto — LÓGICA OPERATIVA (cómo procede)
1) Interpretación del prompt/instrucciones  
   - El proyecto reconoce tres piezas canónicas:  
     a) “artifact-description.txt” define QUÉ es un artefacto JSONL y CÓMO generarlo: una línea por archivo con campos {path, kind, content, …}, exclusión explícita de `.env*` y lockfiles, y marcador `/*__TRUNCATED__*/` para contenidos recortados. :contentReference[oaicite:3]{index=3}  
     b) “code-artifact-analysis.txt” pauta CÓMO leer el artefacto y producir un informe con secciones fijas (resumen, inventario, dependencias, interfaz, datos, grafo, calidad, seguridad, operación, DX, plan). Requiere evidencia “path:línea + snippet” y declarar faltantes o truncados. :contentReference[oaicite:4]{index=4}  
     c) “artifact-writter.txt” (writer) estandariza la reconstrucción: respeta `path/kind/content`, ignora metadatos extra, bloquea traversal y omite binarios en la versión mínima. :contentReference[oaicite:5]{index=5}

2) Dimensiones de lectura (criterios evaluativos)  
   - Estructura e inventario, dependencias/config, interfaz (HTTP/CLI/SDKs), datos/persistencia, grafo/acoplamientos, calidad/mantenibilidad, seguridad estática, observabilidad/operación, documentación/DX, y plan de acción priorizado. Cada hallazgo debe ser trazable a líneas del artefacto. :contentReference[oaicite:6]{index=6}

3) Reglas/umbrales operativos (if/then)  
   - Si un archivo está truncado (`/*__TRUNCATED__*/`), entonces el análisis de ese archivo se declara parcial y se sugiere elevar `--max-bytes`. :contentReference[oaicite:7]{index=7} :contentReference[oaicite:8]{index=8}  
   - Si aparecen variables de entorno, entonces se listan SOLO sus nombres; nunca valores. :contentReference[oaicite:9]{index=9}  
   - Si el artefacto incluye binarios y el writer es “mínimo”, entonces se omiten en la reconstrucción. :contentReference[oaicite:10]{index=10}  
   - Si faltan piezas clave (p. ej., `docker-compose`, tests), entonces se declara explícitamente la ausencia y se pide insumo adicional. :contentReference[oaicite:11]{index=11}

4) Manejo de ambigüedades y conflictos  
   - Ambigüedad por información no visible: el proyecto debe decir “No visible en este chat” y continuar con lo afirmable.  
   - Conflictos entre secciones: prevalece evidencia del artefacto (líneas y rutas) frente a suposiciones.  
   - Datos sensibles: por diseño no se incluyen `.env*`; si se detectan secretos “en código”, se reportan como riesgo. :contentReference[oaicite:12]{index=12}

5) Fases internas (pipeline mental)  
   - Comprensión (leer el artefacto y confirmar detecciones mínimas: lenguaje/s, puntos de entrada, dependencias, env-vars) → Organización (mapa de carpetas/rutas y grafos) → Síntesis (hallazgos por sección con evidencia) → Verificación (consistencia y límites declarados) → Plan (quick wins, medio plazo, riesgos críticos). :contentReference[oaicite:13]{index=13}

6) Forma de salida preferida  
   - Reporte con secciones fijas, evidencia corta por hallazgo y plan priorizado; en textos, español; en fragmentos técnicos (rutas, comandos), inglés. Writer y extractor se entregan como “code snippet” autoportables. :contentReference[oaicite:14]{index=14} :contentReference[oaicite:15]{index=15}

Programa de investigación — QUÉ INVESTIGA
Objeto de estudio (núcleo): artefactos JSONL/NDJSON de proyectos de software. El sistema observa su organización, dependencias, interfaces externas, modelo de datos, acoplamientos internos, calidad estática, seguridad de base, y operabilidad, para producir juicios accionables y reproducibles.

Temas/Nichos principales  
- Generación de artefactos (walker, detección texto/binario, encoding, límites, exclusiones). :contentReference[oaicite:16]{index=16}  
- Análisis por secciones con evidencia y plan. :contentReference[oaicite:17]{index=17}  
- Materialización determinista desde JSONL (writer). :contentReference[oaicite:18]{index=18}  
- Casos demostrativos con artefactos reales (ejemplo: Twilio Voice JavaScript Reference Components con Express, Twilio SDK, OpenAI SDK y WebSockets). :contentReference[oaicite:19]{index=19}

Subtemas  
- Políticas de exclusión de secretos; marcadores de truncado; hash SHA-256 y metadatos; rutas POSIX. :contentReference[oaicite:20]{index=20}  
- Interfaz HTTP/TwiML y WebSocket detectables a partir del artefacto (e.g., `src/server.js`, rutas por componente). :contentReference[oaicite:21]{index=21}  
- Variables de entorno exigidas por `src/config.js` (solo nombres). :contentReference[oaicite:22]{index=22}

Preguntas guía  
- ¿Qué hace el proyecto y cómo está organizado? (propósito, entradas, salidas) :contentReference[oaicite:23]{index=23}  
- ¿Qué interfaces expone (endpoints/CLI/SDK) y con qué dependencias externas se integra? :contentReference[oaicite:24]{index=24}  
- ¿Dónde están los riesgos de mantenibilidad/seguridad y qué arreglos ofrecen mayor retorno? :contentReference[oaicite:25]{index=25}

Supuestos/Hipótesis de partida  
- El artefacto refleja fielmente el árbol de archivos del repo en el momento de extracción.  
- La exclusión de `.env*` y lockfiles reduce ruido y exposición sin afectar el diagnóstico funcional. :contentReference[oaicite:26]{index=26}

Marcos/metodologías (la lente)  
- Evidencia-primero (cada afirmación trazable a `path:línea` o a campos del JSONL).  
- “Contract-first” para writer/extractor (esquema mínimo interoperable). :contentReference[oaicite:27]{index=27}  
- Plan de acción por impacto/esfuerzo y riesgos críticos como cierre del análisis. :contentReference[oaicite:28]{index=28}

Señales, variables o fuentes válidas (y exclusiones)  
- Válidas: campos del artefacto (path/kind/content/metadatos), rutas y snippets visibles, manifiestos (p. ej., `package.json`), archivos de configuración, código fuente. :contentReference[oaicite:29]{index=29} :contentReference[oaicite:30]{index=30}  
- Excluidas: valores de secretos; ejecución del sistema; suposiciones no evidenciables; binarios (contenido). :contentReference[oaicite:31]{index=31}

Criterios de inclusión/exclusión de casos  
- Entra: cualquier proyecto cuyo árbol pueda serializarse a JSONL según la descripción del extractor. :contentReference[oaicite:32]{index=32}  
- Queda fuera: análisis que requiera ejecutar servicios externos o valerse de información no presente en el artefacto (“No visible en este chat”).

Entregables típicos  
- Informe de análisis con 10 secciones y plan priorizado, con citas a rutas/fragmentos. :contentReference[oaicite:33]{index=33}  
- Script de extracción y de escritura como “code snippets” listos para copiar. :contentReference[oaicite:34]{index=34} :contentReference[oaicite:35]{index=35}  
- Artefactos de ejemplo para prueba (p. ej., Twilio Voice). :contentReference[oaicite:36]{index=36}

Límites temáticos y anti-objetivos  
- El proyecto NO publica secretos, NO infiere valores de entorno, NO ejecuta pipelines ni garantiza compilación post-materialización si el artefacto omitió binarios o configuraciones de despliegue. :contentReference[oaicite:37]{index=37} :contentReference[oaicite:38]{index=38}

Ejemplos operativos (en el estilo del proyecto)
1) Camino feliz  
   Problema: “Analiza este artefacto y dame un plan de acción.”  
   Decisión: Aplicar plantilla de análisis; confirmar lenguajes y entrada (`src/server.js` con Express y carga dinámica de rutas); listar dependencias (`@twilio/voice-sdk`, `openai`, `ws`); enumerar env-vars requeridas (`APP_SID`, `ACCOUNT_SID`, `API_KEY_SID`, `API_KEY_SECRET`, `AUTH_TOKEN`, `CALLER_ID`, `CALLBACK_BASE_URL`, `DEFAULT_IDENTITY`, `OPENAI_API_KEY`).  
   Salida: Reporte con hallazgos y evidencia, p. ej., “Interfaz: `/twilio-voice-basic-call-control/twiml` con `Twilio.webhook`” y riesgos (p. ej., CORS abierto si aplica). :contentReference[oaicite:39]{index=39}

2) Caso limítrofe  
   Problema: “Reconstruye TODO el proyecto y déjalo ejecutando.”  
   Tratamiento: El writer mínimo NO escribe binarios ni resuelve dependencias del sistema; se delimita el alcance a materializar archivos de texto y se advierten faltantes para ejecución real (p. ej., binarios omitidos, secretos). :contentReference[oaicite:40]{index=40}

3) Ambigüedad (opcional)  
   Problema: “Falla un endpoint de producción.”  
   Decisión: Declarar “No visible en este chat” para logs y entorno real; solicitar evidencia en el artefacto (rutas, handlers, middlewares) y, si hay truncados, pedir aumentar `--max-bytes`. :contentReference[oaicite:41]{index=41}

Notas de estilo
- Contenido sustantivo, sin paja.  
- Terminología consistente (“artefacto JSONL”, “writer”, “extractor”, “evidencia”).  
- Declarar explícitamente lo no visible.  
- Código/rutas/comandos SIEMPRE en inglés; prosa en español.  
- Cuando se citen hallazgos, referir a archivos/fragmentos del artefacto (p. ej., `src/components/twilio-voice-ai-conversation/routes.js` para `Twilio.webhook` y `conversationRelay`). :contentReference[oaicite:42]{index=42}
